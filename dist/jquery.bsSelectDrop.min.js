!function(e){function t(e){let t=e.closest(".dropdown");t.length&&t.dropdown("show")}function s(s){if(s.closest(".dropdown").length)return s.closest(".dropdown");let o=s.data("options"),l=!1!==s.prop("multiple"),a=s.val(),r="";l&&(r='data-bs-auto-close="outside"');let i=[];o.dropUp&&i.push("dropup"),o.dropEnd&&i.push("dropend"),o.dropStart&&i.push("dropstart"),o.dropCenter&&i.push("dropdown-center");let p=e("<div>",{class:"dropdown js-bs-select-dropdown "+i.join(" "),html:`                <a class="${o.btnClass} dropdown-toggle d-flex flex-nowrap align-items-center" ${r} href="#" role="button" data-bs-toggle="dropdown"                    aria-expanded="false" style="width:${o.btnWidth}">                <div class="js-dropdown-header flex-fill text-start">${o.btnEmptyText}</div>                </a>`}).insertAfter(s);p.on("hide.bs.dropdown",function(){s.trigger("hide.bs.select")}).on("hidden.bs.dropdown",function(){s.trigger("hidden.bs.select")}).on("show.bs.dropdown",function(){s.trigger("show.bs.select"),e(".js-bs-select-dropdown .dropdown-menu.show").length&&e(".js-bs-select-dropdown .dropdown-menu.show").closest(".dropdown").dropdown("hide")}).on("shown.bs.dropdown",function(){s.trigger("shown.bs.select"),s.closest(".dropdown").find('[type="search"]').length&&s.closest(".dropdown").find('[type="search"]').focus()}),s.appendTo(p),s.val(a),s.hide();let c=o.darkMenu?"dropdown-menu-dark":"",u=e("<div>",{class:"dropdown-menu mt-1 "+c}).appendTo(p),h="",f=o.darkMenu?"btn-close-white":"",g="",m="";if(o.search&&(h='<input type="search" class="form-control form-control-sm me-auto" placeholder="Suchen..">'),l&&(g=`<button type="button" class="btn-close ${f} ms-2" data-bs-dismiss="dropdown" aria-label="Close"></button>`,o.showActionMenu)){let b=o.darkMenu?"light":"secondary";m=`						<div class="btn-group btn-group-sm mt-2">							<a href="#" class="btn btn-outline-${b} p-0 js-select-select-all">${o.selectAllText}</a>							<a href="#" class="btn btn-outline-${b} p-0 js-select-select-none">${o.deselectAllText}</a>						</div>					`}e(`			<div class="d-flex flex-column px-2 pb-2 border-bottom">	            <div class="d-flex  justify-content-end align-items-center">	                ${h}	                ${g}	            </div>	            ${m}            </div>            `).appendTo(u),null!==o.menuPreHtml&&(e("<div>",{html:o.menuPreHtml,class:"text-muted p-3 fs-6"}).appendTo(u),e('<hr class="dropdown-divider mt-0">').appendTo(u));let w=0,x=!1;return s.find("optgroup, option").each(function(t,s){if(e(this).is("optgroup")){e(`<h6 class="dropdown-header text-uppercase text-start my-0 w-100 rounded-0 py-1 bg-${o.dropHeaderClass} text-bg-${o.dropHeaderClass}">${e(this).attr("label")}</h6>`).appendTo(u);return}let n=e(s),d=n.prop("value"),r=0!==n.closest("optgroup").length,i=n.prop("disabled");if(!d||""===d)return;let p="";!1!==d&&(p=l?e.inArray(d,a)>-1?"active":"":a===d?"active":"");let c=o.showSubtext&&n.data("subtext")?`<small class="text-muted mx-2">${n.data("subtext")}`:"";x&&!r&&e('<hr class="dropdown-divider">').appendTo(u),e("<div>",{html:`                <a class="dropdown-item ${p} ${i?"disabled":""} d-flex align-items-end" data-index="${w}" href="#">                    <span class=" ${r?"ps-3":""}">${n.text()}</span>                    ${c}                </a>`}).appendTo(u),x=r,w++}),null!==o.menuAppendHtml&&(e('<hr class="dropdown-divider">').appendTo(u),e("<div>",{html:o.menuAppendHtml,class:"text-muted fs-6",css:{padding:"4px 16px"}}).appendTo(u)),p.on("click",".js-select-select-all",function(e){e.preventDefault(),s.find("option").prop("selected",!0),d(s),t(s),s.trigger("change.bs.select"),s.trigger("change")}).on("click",".js-select-select-none",function(e){e.preventDefault(),s.find("option").prop("selected",!1),d(s),t(s),s.trigger("change.bs.select"),s.trigger("change")}).on("hidden.bs.dropdown",function(){let t=e(this).find('[type="search"]');t.length&&t.val(null).trigger("keyup")}).on("keyup",'[type="search"]',function(){let t=e(this).val().trim(),s=p.find("[data-index]");""!==t?s.each(function(s,n){e(n).text().trim().toUpperCase().indexOf(t.toUpperCase())>-1?e(n).removeClass("d-none"):e(n).addClass("d-none")}):s.removeClass("d-none")}).on("click",'[data-bs-dismiss="dropdown"]',function(t){e(t.currentTarget).closest(".dropdown").find('[data-bs-toggle="dropdown"]').dropdown("hide")}).on("click",".dropdown-item",function(t){t.preventDefault(),l||p.find(".dropdown-item.active").removeClass("active"),e(t.currentTarget).toggleClass("active");let o=[];p.find(".dropdown-item.active").each(function(t,n){let d=s.find("option:eq("+e(n).data("index")+")").prop("value");!1!==d&&o.push(d)}),l?s.val(o):o.length?s.val(o[0]):s.val(null),console.log(s.val()),n(s),s.trigger("change")}),n(s),p}function n(e){let t=e.data("options"),s=e.closest(".js-bs-select-dropdown"),n=s.find(".js-dropdown-header"),o=e.val(),d;if(o&&o.length){if(Array.isArray(o)){if(1===o.length){let l=e.find(`option[value="${o[0]}"]`);d=`<span>${l.text()}</span><small class="text-muted ms-2">${l.closest("optgroup").length&&l.data("subtext")?`<small class="text-muted mx-2">${l.data("subtext")}`:""}</small>`}else if(t.showSelectionAsList){let a=[];o.forEach(t=>{let s=e.find(`option[value="${t}"]`),n=s.closest("optgroup").length&&s.data("subtext")?s.data("subtext"):"";a.push(`<div><span>${s.text()}</span><small class="text-muted ms-2">${n}</small></div>`)}),d=`<div class="d-flex flex-column">${a.join("")}</div>`}else{let r=e.find("option").length;d=t.showSelectedText(o.length,r)}}else{let i=e.find(`option[value="${o}"]`);d=`<span>${i.text()}</span><small class="text-muted mx-2">${i.closest("optgroup").length&&i.data("subtext")?`<small class="text-muted ms-2">${i.data("subtext")}`:""}</small>`}}else d=t.btnEmptyText;n.html(d)}function o(e,t){let s=e.val(),n=e.closest(".js-bs-select-dropdown");e.insertBefore(n),e.val(s),n.remove(),t&&e.show()}function d(e){o(e,!1),s(e)}e.fn.bsSelectDrop=function(l,a){let r={btnWidth:"fit-content",btnEmptyText:"Please select..",dropUp:!1,dropStart:!1,dropEnd:!1,dropCenter:!1,dropHeaderClass:"secondary",btnClass:"btn btn-outline-secondary",search:!0,darkMenu:!1,menuPreHtml:null,menuAppendHtml:null,showSubtext:!0,showActionMenu:!0,showSelectionAsList:!0,showSelectedText:function(e,t){return`${e}/${t} selected`},deselectAllText:"Deselect All",selectAllText:"Select All"},i=!1,p=!1;return"string"==typeof l?i=!0:p=!0,e(this).each(function(c,u){let h=e(u);if(p&&h.data("options",e.extend(!0,r,l||{})),s(h),i)switch(l){case"hide":var f;let g;(g=(f=h).closest(".dropdown")).length&&g.dropdown("hide");break;case"show":t(h);break;case"val":h.val(a),function e(t){let s=t.closest(".js-bs-select-dropdown");s.find(".dropdown-item.active").removeClass("active");let o=t.val();Array.isArray(o)||(o=[o]),o.forEach(e=>{let n=t.find(`option[value="${e}"]`).index();s.find(`.dropdown-item[data-index="${n}"]`).addClass("active")}),t.trigger("change"),n(t)}(h),d(h),h.trigger("change.bs.select");break;case"destroy":o(h,!0),h.trigger("destroy.bs.select");break;case"updateOptions":h.data("options",e.extend(!0,h.data("options"),a||{},r)),d(h),h.trigger("update.bs.select");break;case"refresh":d(h),h.trigger("refresh.bs.select")}return h})},e('[data-bs-toggle="select"]').bsSelectDrop()}(jQuery);